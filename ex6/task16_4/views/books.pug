//- Task 14 (Handling complex data in JSON format). Point 1
doctype html
html
    head
        meta(charset='utf-8')
        meta(name='viewport', content='width=device-width, initial-scale=1, shrink-to-fit=no')
        link(href='https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css', rel='stylesheet')
        //- Added browser script here
        script(src='./books.js')
        title Books DB
    body(class="p-4")
        h1(class="pb-3") Books List
  
        if books
            table(class="table table-striped")
                tr
                    th Title
                    th Author
                    th Category
                    th 
                    th
                each book in books
                    //- Added attribute id so we can find the row to remove (when clicked on delete)
                    tr(id=book._id)
                        td=book.title
                        td=book.author
                        td=book.category
                        td
                            a(href='#' onclick="onEditClick(event)" data-edit-id=book._id) Edit
                        td
                            a(href='#' onclick="deleteBook(event)" data-delete-id=book._id) Delete


        else
            p(class="text-muted m-5 text-center") You have not added books to database yet
        

        h4(class="mt-3 mb-4") Add Book
        
        //- Action in form replaced with event "onsubmit", we send AJAX request with browser script - onFormSubmit()
        //- We need to return false to prevent default onsubmit behavior  
        form(name="bookForm" style="width: 380px" onsubmit="onFormSubmit(); return false")
            div(class="form-group")
                label(for="title") Title
                input(name="title" class="form-control")
            div(class="form-group")
                label(for="author") Author
                input(name="author" class="form-control")
            div(class="form-group")
                label(for="category") Category
                input(name="category" class="form-control")
                      
            input(type="submit" class="btn btn-primary")
            input(type="reset" class="btn btn-light ml-2")

        script(src='https://code.jquery.com/jquery-3.4.1.min.js')
        script(src='https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.15.0/umd/popper.min.js')
        script(src='https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js')